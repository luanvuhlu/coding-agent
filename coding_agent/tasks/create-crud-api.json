{
  "id": "create-crud-api",
  "name": "Create CRUD REST API",
  "description": "Complete workflow to build a CRUD API from database to controller",
  "keywords": ["create", "crud", "api", "rest", "full-stack", "endpoint", "database", "entity", "workflow", "complete"],
  "params": {
    "entity": "{{entity_name}}",
    "table": "{{table_name}}",
    "fields": "{{columns}}",
    "basePackageFolder": "{{read from project structure or ask user}}"
  },
  "tasks": [
    {
      "step": 1,
      "name": "Create JPA Entity",
      "description": "Map database table to Kotlin entity class",
      "files": [
        {
          "path": "src/main/kotlin/{basePackageFolder}/entity/{{entity_name}}.kt",
          "params": {
            "entity": "{{entity_name}}",
            "table": "{{table_name}}",
            "fields": "{{columns}}"
          },
          "code_examples": {
            "kotlin": "code/kotlin/Entity.kt"
          }
        }
      ]
    },
    {
      "step": 2,
      "name": "Create Repository Interface",
      "description": "Define data access methods",
      "files": [
        {
          "path": "src/main/kotlin/{basePackageFolder}/repository/{{entity_name}}Repository.kt",
          "params": {
            "entity": "{{entity_name}}"
          },
          "code_examples": {
            "kotlin": "code/kotlin/EntityRepository.kt"
          }
        }
      ]
    },
    {
      "step": 3,
      "name": "Create Service Layer",
      "description": "Implement business logic",
      "files": [
        {
          "path": "src/main/kotlin/{basePackageFolder}/service/{{entity_name}}Service.kt",
          "params": {
            "entity": "{{entity_name}}"
          },
          "code_examples": {
            "kotlin": "code/kotlin/EntityService.kt"
          }
        }
      ]
    },
    {
      "step": 4,
      "name": "Create REST Controller",
      "description": "Expose CRUD endpoints",
      "notes": [
        "Check whether to use @RestController or @Controller based on project conventions",
        "Should use pagination for list endpoints if dataset could be large"
      ],
      "files": [
        {
          "path": "src/main/kotlin/{basePackageFolder}/controller/{{entity_name}}Controller.kt",
          "params": {
            "entity": "{{entity_name}}",
            "path": "/api/{{table_name}}"
          },
          "code_examples": {
            "kotlin": "code/kotlin/EntityController.kt"
          }
        }
      ]
    },
    {
      "step": 5,
      "name": "Add Unit Tests",
      "description": "Test service layer with mocks",
      "files": [
        {
          "path": "src/test/kotlin/{basePackageFolder}/service/{{entity_name}}ServiceTest.kt",
          "params": {
            "entity": "{{entity_name}}"
          },
          "code_examples": {
            "kotlin": "code/kotlin/EntityServiceTest.kt"
          }
        }
      ]
    }
  ],
  
  "dependencies": [
    "spring-boot-starter-web",
    "spring-boot-starter-data-jpa",
    "liquibase-core"
  ],
  
  "estimated_time": "30-45 minutes",
  
  "checklist": [
    "Verify database migration runs successfully",
    "Test repository methods work with H2/test database",
    "Validate all CRUD endpoints with Postman/curl",
    "Ensure tests pass with >80% coverage"
  ]
}
